<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="DeployForge.App.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DeployForge.App.Views"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer Padding="40">
        <StackPanel MaxWidth="800">
            
            <!-- Header -->
            <TextBlock 
                Text="Settings" 
                Style="{StaticResource DeployForgePageHeaderStyle}"/>
            
            <!-- Appearance -->
            <TextBlock 
                Text="Appearance" 
                Style="{StaticResource DeployForgeSectionHeaderStyle}"/>
            
            <Border Style="{StaticResource DeployForgeCardStyle}">
                <StackPanel>
                    <ComboBox 
                        Header="Theme"
                        ItemsSource="{x:Bind ViewModel.Themes}"
                        SelectedItem="{x:Bind ViewModel.Theme, Mode=TwoWay}"
                        Width="200"/>
                    
                    <ToggleSwitch 
                        Header="Show Advanced Options"
                        IsOn="{x:Bind ViewModel.ShowAdvancedOptions, Mode=TwoWay}"
                        Margin="0,16,0,0"/>
                </StackPanel>
            </Border>
            
            <!-- Paths -->
            <TextBlock 
                Text="Paths" 
                Style="{StaticResource DeployForgeSectionHeaderStyle}"/>
            
            <Border Style="{StaticResource DeployForgeCardStyle}">
                <StackPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox 
                            Grid.Column="0"
                            Header="Default Mount Path"
                            Text="{x:Bind ViewModel.DefaultMountPath, Mode=TwoWay}"
                            IsReadOnly="True"/>
                        
                        <Button 
                            Grid.Column="1"
                            Content="Browse"
                            VerticalAlignment="Bottom"
                            Margin="8,0,0,0"
                            Click="BrowseMountPath_Click"/>
                    </Grid>
                    
                    <Grid Margin="0,16,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox 
                            Grid.Column="0"
                            Header="Backup Directory"
                            Text="{x:Bind ViewModel.BackupDirectory, Mode=TwoWay}"
                            IsReadOnly="True"/>
                        
                        <Button 
                            Grid.Column="1"
                            Content="Browse"
                            VerticalAlignment="Bottom"
                            Margin="8,0,0,0"
                            Click="BrowseBackupDirectory_Click"/>
                    </Grid>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,16,0,0" Spacing="8">
                        <Button 
                            Content="Open Templates Folder"
                            Command="{x:Bind ViewModel.OpenTemplatesFolderCommand}"/>
                        <Button 
                            Content="Open Logs Folder"
                            Command="{x:Bind ViewModel.OpenLogsFolderCommand}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Image Operations -->
            <TextBlock 
                Text="Image Operations" 
                Style="{StaticResource DeployForgeSectionHeaderStyle}"/>
            
            <Border Style="{StaticResource DeployForgeCardStyle}">
                <StackPanel>
                    <ToggleSwitch 
                        Header="Create Backups Before Modifying"
                        IsOn="{x:Bind ViewModel.CreateBackups, Mode=TwoWay}"/>
                    
                    <NumberBox 
                        Header="Max Concurrent Operations"
                        Value="{x:Bind ViewModel.MaxConcurrentOperations, Mode=TwoWay}"
                        Minimum="1"
                        Maximum="16"
                        SpinButtonPlacementMode="Compact"
                        Margin="0,16,0,0"
                        Width="200"
                        HorizontalAlignment="Left"/>
                </StackPanel>
            </Border>
            
            <!-- Logging -->
            <TextBlock 
                Text="Logging" 
                Style="{StaticResource DeployForgeSectionHeaderStyle}"/>
            
            <Border Style="{StaticResource DeployForgeCardStyle}">
                <StackPanel>
                    <ComboBox 
                        Header="Log Level"
                        ItemsSource="{x:Bind ViewModel.LogLevels}"
                        SelectedItem="{x:Bind ViewModel.LogLevel, Mode=TwoWay}"
                        Width="200"/>
                </StackPanel>
            </Border>
            
            <!-- Updates -->
            <TextBlock 
                Text="Updates" 
                Style="{StaticResource DeployForgeSectionHeaderStyle}"/>
            
            <Border Style="{StaticResource DeployForgeCardStyle}">
                <StackPanel>
                    <ToggleSwitch 
                        Header="Check for Updates on Startup"
                        IsOn="{x:Bind ViewModel.CheckForUpdates, Mode=TwoWay}"/>
                    
                    <ToggleSwitch 
                        Header="Show Confirmation Dialogs"
                        IsOn="{x:Bind ViewModel.ShowConfirmations, Mode=TwoWay}"
                        Margin="0,16,0,0"/>
                </StackPanel>
            </Border>
            
            <!-- Data Management -->
            <TextBlock 
                Text="Data Management" 
                Style="{StaticResource DeployForgeSectionHeaderStyle}"/>
            
            <Border Style="{StaticResource DeployForgeCardStyle}">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button 
                            Content="Export Settings"
                            Click="ExportSettings_Click"/>
                        <Button 
                            Content="Import Settings"
                            Click="ImportSettings_Click"/>
                        <Button 
                            Content="Reset to Defaults"
                            Click="ResetSettings_Click"/>
                    </StackPanel>
                    
                    <Button 
                        Content="Clear Recent Images"
                        Margin="0,16,0,0"
                        Command="{x:Bind ViewModel.ClearRecentImagesCommand}"/>
                </StackPanel>
            </Border>
            
            <!-- About -->
            <TextBlock 
                Text="About" 
                Style="{StaticResource DeployForgeSectionHeaderStyle}"/>
            
            <Border Style="{StaticResource DeployForgeCardStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <FontIcon 
                        Grid.Column="0"
                        Glyph="&#xE90F;"
                        FontSize="48"
                        Foreground="{StaticResource DeployForgePrimaryBrush}"
                        Margin="0,0,24,0"/>
                    
                    <StackPanel Grid.Column="1">
                        <TextBlock 
                            Text="DeployForge" 
                            FontSize="20"
                            FontWeight="SemiBold"/>
                        <TextBlock 
                            Text="{x:Bind ViewModel.AppVersion}"
                            Opacity="0.6"/>
                        <TextBlock 
                            Text="{x:Bind ViewModel.Copyright}"
                            Opacity="0.4"
                            Margin="0,4,0,0"/>
                        <HyperlinkButton 
                            Content="GitHub Repository"
                            NavigateUri="https://github.com/DeployForge/DeployForge"
                            Margin="0,8,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>
            
        </StackPanel>
    </ScrollViewer>
</Page>
