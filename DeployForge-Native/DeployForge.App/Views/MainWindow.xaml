<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="DeployForge.App.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DeployForge.App.Views"
    Title="DeployForge"
    MinWidth="1024"
    MinHeight="700">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Title Bar -->
        <Grid Grid.Row="0" Grid.ColumnSpan="2" Background="{ThemeResource LayerFillColorDefaultBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal" Spacing="12" Margin="16,0">
                <Button x:Name="BackButton" Style="{StaticResource NavigationBackButtonNormalStyle}"
                        IsEnabled="{x:Bind ViewModel.IsBackEnabled, Mode=OneWay}"
                        Command="{x:Bind ViewModel.GoBackCommand}"/>
                <TextBlock Text="DeployForge" Style="{StaticResource TitleTextBlockStyle}" VerticalAlignment="Center"/>
            </StackPanel>

            <TextBlock Grid.Column="1" Text="{x:Bind ViewModel.CurrentPageTitle, Mode=OneWay}"
                       Style="{StaticResource SubtitleTextBlockStyle}"
                       VerticalAlignment="Center" HorizontalAlignment="Center"/>

            <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8" Margin="16,0">
                <ProgressRing IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}" Width="24" Height="24"/>
            </StackPanel>
        </Grid>

        <!-- Navigation Pane -->
        <Border Grid.Row="1" Background="{ThemeResource LayerFillColorDefaultBrush}" BorderThickness="0,0,1,0" 
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Spacing="4" Padding="12">
                    <RadioButton x:Name="NavWelcome" GroupName="Navigation" Style="{StaticResource NavigationViewItemButtonStyle}"
                                 IsChecked="{x:Bind ViewModel.SelectedNavItem.Equals('Welcome'), Mode=OneWay}"
                                 Command="{x:Bind ViewModel.NavigateToCommand}" CommandParameter="Welcome">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <FontIcon Glyph="&#xE80F;" FontSize="16"/>
                            <TextBlock Text="Welcome" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton x:Name="NavBuild" GroupName="Navigation" Style="{StaticResource NavigationViewItemButtonStyle}"
                                 IsChecked="{x:Bind ViewModel.SelectedNavItem.Equals('Build'), Mode=OneWay}"
                                 Command="{x:Bind ViewModel.NavigateToCommand}" CommandParameter="Build">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <FontIcon Glyph="&#xE713;" FontSize="16"/>
                            <TextBlock Text="Build Image" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton x:Name="NavProfiles" GroupName="Navigation" Style="{StaticResource NavigationViewItemButtonStyle}"
                                 IsChecked="{x:Bind ViewModel.SelectedNavItem.Equals('Profiles'), Mode=OneWay}"
                                 Command="{x:Bind ViewModel.NavigateToCommand}" CommandParameter="Profiles">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <FontIcon Glyph="&#xE748;" FontSize="16"/>
                            <TextBlock Text="Profiles" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton x:Name="NavAnalyze" GroupName="Navigation" Style="{StaticResource NavigationViewItemButtonStyle}"
                                 IsChecked="{x:Bind ViewModel.SelectedNavItem.Equals('Analyze'), Mode=OneWay}"
                                 Command="{x:Bind ViewModel.NavigateToCommand}" CommandParameter="Analyze">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <FontIcon Glyph="&#xE9D9;" FontSize="16"/>
                            <TextBlock Text="Analyze" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>
                </StackPanel>

                <StackPanel Grid.Row="1" Spacing="4" Padding="12">
                    <Rectangle Height="1" Fill="{ThemeResource DividerStrokeColorDefaultBrush}" Margin="0,8"/>
                    
                    <RadioButton x:Name="NavSettings" GroupName="Navigation" Style="{StaticResource NavigationViewItemButtonStyle}"
                                 IsChecked="{x:Bind ViewModel.SelectedNavItem.Equals('Settings'), Mode=OneWay}"
                                 Command="{x:Bind ViewModel.NavigateToCommand}" CommandParameter="Settings">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <FontIcon Glyph="&#xE713;" FontSize="16"/>
                            <TextBlock Text="Settings" VerticalAlignment="Center"/>
                        </StackPanel>
                    </RadioButton>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Content Frame -->
        <Frame x:Name="ContentFrame" Grid.Row="1" Grid.Column="1" Padding="24"/>

        <!-- Status Bar -->
        <Border Grid.Row="2" Grid.ColumnSpan="2" Background="{ThemeResource LayerFillColorDefaultBrush}"
                BorderThickness="0,1,0,0" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                Padding="16,8">
            <Grid>
                <TextBlock Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}" 
                           Style="{StaticResource CaptionTextBlockStyle}"
                           VerticalAlignment="Center"/>
                <TextBlock Text="v2.0.0" HorizontalAlignment="Right"
                           Style="{StaticResource CaptionTextBlockStyle}"
                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            </Grid>
        </Border>
    </Grid>
</Window>
