<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="DeployForge.App.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DeployForge.App.Views">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Spacing="24" MaxWidth="800" Padding="0,0,0,24">
            
            <!-- General Settings -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="12">
                    <TextBlock Text="General" Style="{StaticResource SubtitleTextBlockStyle}"/>
                    
                    <ToggleSwitch Header="Check for updates automatically"
                                  IsOn="{x:Bind ViewModel.CheckForUpdates, Mode=TwoWay}"/>
                    
                    <ToggleSwitch Header="Send anonymous usage data"
                                  IsOn="{x:Bind ViewModel.SendAnonymousUsage, Mode=TwoWay}"/>
                    
                    <ComboBox Header="Language" HorizontalAlignment="Stretch"
                              ItemsSource="{x:Bind ViewModel.AvailableLanguages}"
                              SelectedItem="{x:Bind ViewModel.Language, Mode=TwoWay}"/>
                    
                    <ToggleSwitch Header="Show advanced options"
                                  IsOn="{x:Bind ViewModel.ShowAdvancedOptions, Mode=TwoWay}"/>
                    
                    <ToggleSwitch Header="Confirm before exiting"
                                  IsOn="{x:Bind ViewModel.ConfirmOnExit, Mode=TwoWay}"/>
                </StackPanel>
            </Border>
            
            <!-- Appearance -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="12">
                    <TextBlock Text="Appearance" Style="{StaticResource SubtitleTextBlockStyle}"/>
                    
                    <ComboBox Header="Theme" HorizontalAlignment="Stretch"
                              ItemsSource="{x:Bind ViewModel.ThemeOptions}"
                              SelectedItem="{x:Bind ViewModel.Theme, Mode=TwoWay}"/>
                    
                    <ComboBox Header="Accent Color" HorizontalAlignment="Stretch"
                              ItemsSource="{x:Bind ViewModel.AccentColorOptions}"
                              SelectedItem="{x:Bind ViewModel.AccentColor, Mode=TwoWay}"/>
                    
                    <ToggleSwitch Header="Show status bar"
                                  IsOn="{x:Bind ViewModel.ShowStatusBar, Mode=TwoWay}"/>
                    
                    <ToggleSwitch Header="Enable animations"
                                  IsOn="{x:Bind ViewModel.EnableAnimations, Mode=TwoWay}"/>
                </StackPanel>
            </Border>
            
            <!-- Paths -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="12">
                    <TextBlock Text="Paths" Style="{StaticResource SubtitleTextBlockStyle}"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox Header="Default Output Directory" 
                                 Text="{x:Bind ViewModel.DefaultOutputDirectory, Mode=TwoWay}"
                                 IsReadOnly="True"/>
                        <Button Grid.Column="1" Content="Browse" VerticalAlignment="Bottom" Margin="8,0,0,0"
                                Command="{x:Bind ViewModel.BrowseOutputDirectoryCommand}"/>
                    </Grid>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox Header="Temp Directory" 
                                 Text="{x:Bind ViewModel.TempDirectory, Mode=TwoWay}"
                                 IsReadOnly="True"/>
                        <Button Grid.Column="1" Content="Browse" VerticalAlignment="Bottom" Margin="8,0,0,0"
                                Command="{x:Bind ViewModel.BrowseTempDirectoryCommand}"/>
                    </Grid>
                </StackPanel>
            </Border>
            
            <!-- Build Settings -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="12">
                    <TextBlock Text="Build Settings" Style="{StaticResource SubtitleTextBlockStyle}"/>
                    
                    <NumberBox Header="Max Parallel Operations" Minimum="1" Maximum="16"
                               Value="{x:Bind ViewModel.MaxParallelOperations, Mode=TwoWay}"/>
                    
                    <ComboBox Header="Default Compression Level" HorizontalAlignment="Stretch"
                              ItemsSource="{x:Bind ViewModel.CompressionOptions}"
                              SelectedItem="{x:Bind ViewModel.DefaultCompression, Mode=TwoWay}"/>
                    
                    <ToggleSwitch Header="Optimize image after build"
                                  IsOn="{x:Bind ViewModel.OptimizeImageAfterBuild, Mode=TwoWay}"/>
                    
                    <ToggleSwitch Header="Create backup before modifying"
                                  IsOn="{x:Bind ViewModel.CreateBackupBeforeModify, Mode=TwoWay}"/>
                    
                    <ToggleSwitch Header="Cleanup temp files after build"
                                  IsOn="{x:Bind ViewModel.CleanupTempFilesAfterBuild, Mode=TwoWay}"/>
                </StackPanel>
            </Border>
            
            <!-- Logs -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="12">
                    <TextBlock Text="Logs" Style="{StaticResource SubtitleTextBlockStyle}"/>
                    
                    <TextBox Header="Log Directory" Text="{x:Bind ViewModel.LogDirectory, Mode=OneWay}"
                             IsReadOnly="True"/>
                    
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button Content="Open Logs Folder" Command="{x:Bind ViewModel.OpenLogsDirectoryCommand}"/>
                        <Button Content="Clear Logs" Command="{x:Bind ViewModel.ClearLogsCommand}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- About -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="12">
                    <TextBlock Text="About" Style="{StaticResource SubtitleTextBlockStyle}"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel>
                            <TextBlock Text="DeployForge" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                            <TextBlock Text="Windows Deployment Customization Suite"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        
                        <TextBlock Grid.Column="1" Text="{x:Bind ViewModel.AppVersion}"
                                   Style="{StaticResource BodyTextBlockStyle}"
                                   VerticalAlignment="Center"/>
                    </Grid>
                    
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <HyperlinkButton Content="GitHub" NavigateUri="https://github.com/DeployForge/DeployForge"/>
                        <HyperlinkButton Content="Documentation"/>
                        <HyperlinkButton Content="Report Issue"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Actions -->
            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
                <Button Content="Reset to Defaults" Command="{x:Bind ViewModel.ResetSettingsCommand}"/>
                <Button Content="Save Settings" Style="{StaticResource AccentButtonStyle}"
                        Command="{x:Bind ViewModel.SaveSettingsCommand}"
                        IsEnabled="{x:Bind ViewModel.HasChanges, Mode=OneWay}"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
